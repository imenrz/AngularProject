<form [formGroup]="eventForm" (submit)="onSubmit()">
  <div class="mb-3">
    <label for="title" class="form-label">Title</label>
    <input
      type="text"
      id="title"
      class="form-control"
      formControlName="title"
    />
  </div>

  <div *ngIf="title?.invalid && title?.touched">
    <span *ngIf="title?.hasError('required')" style="color:red">
      This field is required
    </span><br />
    <span *ngIf="title?.hasError('minlength')" style="color:red">
      This field must contain at least 5 characters
    </span><br />
    <span *ngIf="title?.errors?.['pattern']" style="color:red">
      This field must respect the pattern (letters and spaces only)
    </span>
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Description</label>
    <textarea id="description" class="form-control" formControlName="description"></textarea>
  </div>

  <div *ngIf="eventForm.get('description')?.invalid && eventForm.get('description')?.touched">
    <span *ngIf="eventForm.get('description')?.hasError('required')" style="color:red">
      This field is required
    </span><br />
    <span *ngIf="eventForm.get('description')?.hasError('minlength')" style="color:red">
      This field must contain at least 30 characters
    </span>
  </div>

  <div class="mb-3">
  <label for="date" class="form-label">Date</label>
  <input type="date" id="date" class="form-control" formControlName="date" />
</div>

<div *ngIf="date?.invalid && date?.touched">
  <span *ngIf="date?.hasError('required')" style="color:red">
    This field is required
  </span><br />
  <span *ngIf="date?.hasError('futureDateInvalid')" style="color:red">
  La date doit Ãªtre au moins 5 jours dans le futur
</span>

</div>
  <div class="mb-3">
    <label for="lieu" class="form-label">Lieu</label>
    <input type="text" id="lieu" class="form-control" formControlName="lieu" />
  </div>

  <div *ngIf="eventForm.get('lieu')?.invalid && eventForm.get('lieu')?.touched">
    <span *ngIf="eventForm.get('lieu')?.hasError('required')" style="color:red">
      This field is required
    </span>
  </div>

  <div class="mb-3">
    <label for="prix" class="form-label">Prix</label>
    <input type="text" id="prix" class="form-control" formControlName="prix" />
  </div>

  <div *ngIf="eventForm.get('prix')?.invalid && eventForm.get('prix')?.touched">
    <span *ngIf="eventForm.get('prix')?.hasError('required')" style="color:red">
      This field is required
    </span><br />
    <span *ngIf="eventForm.get('prix')?.hasError('pattern')" style="color:red">
      Please enter a valid price (numbers and decimals only)
    </span>
  </div>

  <div class="mb-3">
    <label for="nbPlaces" class="form-label">Nombre de places</label>
    <input type="number" id="nbPlaces" class="form-control" formControlName="nbPlaces" />
  </div>

  <div *ngIf="eventForm.get('nbPlaces')?.invalid && eventForm.get('nbPlaces')?.touched">
    <span *ngIf="eventForm.get('nbPlaces')?.hasError('required')" style="color:red">
      This field is required
    </span><br />
    <span *ngIf="eventForm.get('nbPlaces')?.hasError('pattern')" style="color:red">
      Please enter a number between 1 and 100
    </span>
  </div>

  <div class="mb-3">
    <label for="imageUrl" class="form-label">Image (URL)</label>
    <input type="text" id="imageUrl" class="form-control" formControlName="imageUrl" />
  </div>

  
  <div formArrayName="domaines">
  <label class="form-label">Domaines</label>
  <div *ngFor="let domainectr of domaines.controls; let i = index">
    <input type="text" class="form-control" [formControlName]="i" />
    
    <div *ngIf="domainectr?.invalid && domainectr?.touched">
      <span *ngIf="domainectr?.hasError('required')" style="color: red">
        This field is required
      </span><br />
      <span *ngIf="domainectr?.hasError('minlength')" style="color: red">
        This field must contain at least 3 characters
      </span><br />
      <span *ngIf="domainectr?.hasError('maxlength')" style="color: red">
        This field must contain at most 20 characters
      </span>
    </div>
  </div>
  
  <button type="button" class="btn btn-secondary mt-2" (click)="addDomain()">
    Add Domaine
  </button>
</div>


  <button type="submit" class="btn btn-primary" [disabled]="eventForm.invalid">
    Submit 
  </button>
</form>